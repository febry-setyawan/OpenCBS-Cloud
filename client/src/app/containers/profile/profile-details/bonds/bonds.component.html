<cbs-header>
    <div class="cbs-profile__header">
        <div class="cbs-profile__headings">
            <nav role="navigation" aria-label="Breadcrumbs" class="cbs-breadcrumbs">
                <ol class="slds-breadcrumb slds-list--horizontal">
                    <li class="slds-breadcrumb__item slds-text-title--caps">
                        <a routerLink="/profiles">{{ 'PROFILES' | translate }}</a></li>
                    <li class="slds-breadcrumb__item slds-text-title--caps">
                        <a [routerLink]="'/profiles/' + profileType + '/' + profileId + 'info'">{{ (profile |
                            async)?.name }}</a>
                    </li>
                    <li class="slds-breadcrumb__item slds-text-title--caps">
                        <a href="javascript:void(0);">{{ 'BONDS' | translate }}</a>
                    </li>
                </ol>
            </nav>
            <div class="slds-grid slds-grid--vertical-align-center">
                <div class="slds-text-heading--large slds-m-right--medium">{{ (profile | async)?.name }}</div>
                <div scope="row">
                    <ngl-badge type="success" *ngIf="(profile | async)?.status === 'LIVE'">{{'LIVE' | translate}}</ngl-badge>
                    <ngl-badge type="info" *ngIf="(profile | async)?.status === 'PENDING'">{{'PENDING' | translate}}</ngl-badge>
                </div>
            </div>
        </div>

        <div cbs-page-header-layout="right">
            <button (click)="goToCreateBond(profile)" class="slds-button slds-button--neutral">
                    <span class="slds-text-not-selected">
                        <svg aria-hidden="true" class="slds-button__icon--stateful slds-button__icon--left">
                            <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#add"></use>
                        </svg>{{ 'CREATE_BOND' | translate }}
                    </span>
            </button>
        </div>
    </div>
</cbs-header>

<main class="cbs-main cbs-main--pt-lg">
    <div class="cbs-profile-wrap">
        <div class="cbs-profile__left">
            <cbs-sidebar-nav [navElements]="navElements"></cbs-sidebar-nav>
        </div>
        <div class="cbs-profile__right" id="scrollable-section">
            <ng-container>
                <p-table
        [value]="(bonds | async)?.content"
                    [styleClass]="'slds-table slds-table--bordered slds-table--cell-buffer'"
                    selectionMode="single" (onRowSelect)="goToBondInfo($event)">
        <ng-template pTemplate="header">
            <tr>
                <th>{{ 'ISIN' | translate }}</th>
                <th>{{ 'NUMBER' | translate }}</th>
                <th>{{ 'INTEREST_RATE' | translate }}</th>
                <th>{{ 'START_DATE' | translate }}</th>
                <th>{{ 'STATUS' | translate }}</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-row>
            <tr [pSelectableRow]="row">
                <td>{{ row['isin'] }}</td>
                <td>{{ row['number'] | cbsNumberFormat }}</td>
                <td>{{ row['interestRate'] + '%'}}</td>
                <td>{{ row['valueDate'] | cbsDateFormat }} {{ row['valueDate'] | cbsTimeFormat }}</td>
                <td><ngl-badge [type]="(row['status'] | statusBadge)">{{ row['status'] }}</ngl-badge></td>
            </tr>
        </ng-template>
    </p-table>
            </ng-container>
        </div>
    </div>
</main>

<cbs-loading-indicator [isFixed]="true" [showLoader]="!(bonds | async)?.loaded"></cbs-loading-indicator>
